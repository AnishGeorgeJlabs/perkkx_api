// Generated by CoffeeScript 1.9.3

/*
  Wadi sms tool web interface
 */

(function() {
  angular.module('Wadi', ['ui.router']).config(function($stateProvider, $urlRouterProvider) {
    return $stateProvider.state('login', {
      templateUrl: './templates/view_login.html'
    });
  }).controller('MainCtrl', function($scope, $state, $http) {
    var isLoggedIn;
    $state.go('login');
    isLoggedIn = false;
    $scope.checkLogin = function() {
      return isLoggedIn;
    };
    return $scope.login = function(username, pass) {
      return $http.post("http://45.55.72.208/wadi/interface/login", {
        username: username,
        password: pass
      }).success(function(result) {
        isLoggedIn = result.success;
        if (isLoggedIn) {
          return $state.go('main');
        } else {
          return alert("Authentication failed");
        }
      });
    };
  }).controller('LoginCtrl', function($scope) {
    $scope.data = {
      username: '',
      password: ''
    };
    return $scope.submit = function() {
      $scope.$parent.login($scope.data.username, md5($scope.data.password));
      $scope.data.username = '';
      return $scope.data.password = '';
    };
  });


  /*
  angular.module("Wadi", [])
  .controller 'MainCtrl', ($scope, $log, $http) ->
    $scope.data = staticData
  
    $scope.formdata = {}
    $scope.submit = () ->
      nData = $("#dataForm").serializeObject()
      $log.info("Object mode: "+JSON.stringify(nData))
      $http.post "http://45.55.72.208/wadi/interface/post", nData
      .success (res) ->
        $log.info "Got result: "+JSON.stringify(res)
   */

}).call(this);

//# sourceMappingURL=app.js.map
